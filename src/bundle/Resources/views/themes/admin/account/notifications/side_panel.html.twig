{% set max_visible_notifications_count = 10 %}

{% embed '@ibexadesign/ui/component/side_panel/side_panel.html.twig' with {
    title: 'ibexa_notifications'|trans|desc('Notifications'),
    attr: {
        'data-actions': "create",
        class: 'ibexa-notifications-modal ibexa-scroll-disabled',
        id: 'view-notifications',
    },
}%}
    {% block header %}
        <div class="ibexa-side-panel__header">
            <span>{{ 'ibexa_notifications'|trans|desc('Notifications')}}
                <span class="ibexa-notifications-modal__count">({{max_visible_notifications_count}})</span>
            </span>
            <button class="btn ibexa-btn ibexa-btn--tertiary ibexa-btn--small ibexa-notifications-modal__mark-all-read-btn">
                {{ 'ibexa_notifications.btn.mark_all_as_read'|trans|desc('Mark all as read') }}
            </button>
        </div>
    {% endblock %}
    
    {% block content %}
        <div class="ibexa-side-panel__content">
            <div class="ibexa-notifications-modal__spinner">
                <svg class="ibexa-icon ibexa-spin">
                    <use xlink:href="{{ ibexa_icon_path('spinner') }}"></use>
                </svg>
            </div>
            <div class="ibexa-notifications-modal__results">
                {{ render(controller('Ibexa\\Bundle\\AdminUi\\Controller\\NotificationController::renderNotificationsPageAction', {
                    'page': 1,
                })) }}
            </div>
        </div>
    {% endblock %}

    {% block footer %}
        <div class="ibexa-notifications-modal__footer">
            <a class="btn ibexa-btn ibexa-btn--ghost ibexa-notifications-modal__view-all-btn" href="{{ path('ibexa.notifications.render.all') }}">
                {{ 'side_panel.view_all'|trans|desc('View all') }}
                <span class="ibexa-notifications-modal__view-all-btn--count"></span>
            </a>
        </div>
    {% endblock %}
{% endembed %}
