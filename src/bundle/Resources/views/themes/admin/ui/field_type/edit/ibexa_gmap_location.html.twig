{% trans_default_domain 'ibexa_content_forms_content' %}

{%- block ezplatform_fieldtype_ibexa_gmap_location_widget -%}
    {% set readonly = attr.readonly|default(false) %}

    <div class="ibexa-data-source__map {{ readonly ? 'ibexa-data-source__map--disabled' }}"></div>
    <div class="ibexa-data-source__options">
        <div class="ibexa-data-source__field ibexa-data-source__field--address">
            <div class="ibexa-data-source__input-wrapper">
                {{ form_widget(form.address, {'attr': {'class': 'ibexa-data-source__input', 'placeholder': 'ibexa_gmap_location.input.placeholder'|trans|desc('Search address'), readonly: readonly }}) }}
                <div class="ibexa-data-source__locate-me">
                    <twig:ibexa:button
                        html_type="button"
                        type="tertiary-alt"
                        icon="localize"
                        icon_size="small-medium"
                        class="ids-button--locate-me"
                        :disabled="readonly"
                    />
                </div>
                <twig:ibexa:button
                    html_type="button"
                    type="tertiary-alt"
                    icon="search"
                    icon_size="small-medium"
                    class="ids-button--search-by-address"
                />
            </div>
            <div class="ibexa-form-error"></div>
        </div>
        <div class="ibexa-data-source__text-info">
            {{ 'ibexa_gmap_location.text.info'|trans|desc('or enter geographical coordinates') }}
        </div>
        <div class="ibexa-data-source__coordinates">
            {{ form_row(form.latitude, { 'attr': { 'data-value': form.latitude.vars.value, readonly: readonly }}) }}
            {{ form_row(form.longitude, { 'attr': { 'data-value': form.longitude.vars.value, readonly: readonly }}) }}
        </div>
    </div>
{%- endblock -%}
