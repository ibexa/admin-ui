{%- block choice_widget -%}
    {% if expanded %}
        {{- block('choice_widget_expanded') -}}
    {% else %}
        {% set attr = attr|default({})|merge({
            'class': (attr.class|default('') ~ ' ibexa-input ibexa-input--select')|trim,
        }) %}
        {% set source %}
            {{- block('choice_widget_collapsed') -}}
        {% endset %}

        {% include '@ibexadesign/ui/component/dropdown/dropdown.html.twig' with {
            source: source,
            choices: choices,
            preferred_choices: preferred_choices,
            value: form.vars.value,
            multiple: form.vars.multiple,
            custom_init: attr.dropdown_custom_init|default(false),
            class: attr.dropdown_class|default(''),
            translation_domain: choice_translation_domain|default(false),
            custom_form: false,
            is_disabled: attr.disabled|default(false) or disabled|default(false) or dropdown_disabled|default(false),
            is_hidden: attr.dropdown_hidden|default(false),
            is_small: attr.is_small|default(false),
            is_ghost: attr.is_ghost|default(false),
            is_selector: attr.is_selector|default(false),
            is_dynamic: attr.is_dynamic|default(false),
            has_select_all_toggler: attr.has_select_all_toggler|default(false),
            placeholder: attr.placeholder|default(placeholder),
            selected_item_template_path: selected_item_template_path|default(null),
            list_item_template_path: list_item_template_path|default(null),
            items_class: items_class|default(null),
            items_list_header: items_list_header|default(null),
        } only %}
    {% endif %}
{%- endblock choice_widget -%}
