{% import "@ibexadesign/ui/component/macros.html.twig" as html %}

{% set is_template = is_template|default(false) %}

{% set branch_attr = branch_attr|default({})|merge({
    class: ('ibexa-popup-menu ibexa-popup-menu--hidden ibexa-multilevel-popup-menu__branch '
        ~ branch_attr.class|default(''))|trim,
}) %}

{% block branch %}
    <div {{ html.attributes(branch_attr, is_template) }}>
        {% block branch_items %}
            {% for item in items %}
                {% set item_with_subitems = item|merge({
                    subitems: item.subitems|default([]),
                    item_attr: item.item_attr|default({}),
                }) %}

                {% include '@ibexadesign/ui/component/multilevel_popup_menu/multilevel_popup_menu_item.html.twig' with item_with_subitems %}
            {% endfor %}
        {% endblock %}
    </div>
{% endblock %}
