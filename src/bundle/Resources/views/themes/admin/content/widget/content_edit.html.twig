{% trans_default_domain 'ibexa_locationview' %}
{% set default_form_templates = '@ibexadesign/content/widget/form_fields.html.twig' %}
{% set form_templates = form_templates is defined ? form_templates : default_form_templates %}

{% form_theme form with form_templates %}

{% set data_actions = data_actions|default('edit') %}
{% set action = action is defined ? action : path('ibexa.content.edit') %}
{% set check_is_prevent_show = form.language.vars.choices|length == 1 %}

{% embed '@ibexadesign/ui/component/edit_content_translation_select.html.twig' with {
    title: 'content.edit.select_language'|trans|desc('Select translation'),
    has_search: form.language.vars.choices|length >= 10,
    filter_placeholder: 'instant.filter.languages.placeholder'|trans|desc('Search...'),
    filter_description: 'instant.filter.languages.select_language.desc'|trans|desc('Languages'),
    extra_class: check_is_prevent_show ? 'ibexa-extra-actions--prevent-show',
    data_attr: {
        'data-actions': data_actions
    },
} %}
    {% block before_body %}
        {{ form_start(form, { 'action': action }) }}
    {% endblock %}

    {% block content_items %}
        {{ form_widget(form.language, { 'attr': { 'class': 'ibexa-instant-filter__items' } }) }}
        {{ form_widget(form.version_info, { 'attr': { 'hidden': 'hidden' } }) }}
        {{ form_widget(form.content_info, { 'attr': {
            'hidden': 'hidden',
            'class': 'ibexa-extra-actions__form-field ibexa-extra-actions__form-field--content-info'
        } }) }}
        {{ form_widget(form.location, { 'attr': {
            'hidden': 'hidden',
            'class': 'ibexa-extra-actions__form-field ibexa-extra-actions__form-field--location'
        } }) }}
    {% endblock %}

    {% block footer_items %}
        {% trans_default_domain 'ibexa_locationview' %}

        <twig:ibexa:button
            type="primary"
            html_type="submit"
            class="ibexa-extra-actions__confirm-btn"
            :disabled="true"
        >
            {{ 'edit.languages.edit'|trans|desc('Edit') }}
        </twig:ibexa:button>
        <twig:ibexa:button
            type="secondary"
            class="ibexa-btn--close"
        >
            {{ 'edit.languages.discard'|trans|desc('Discard') }}
        </twig:ibexa:button>
    {% endblock %}

    {% block after_body %}
        {{ form_end(form) }}
    {% endblock %}
{% endembed %}
